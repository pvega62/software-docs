"use strict";(globalThis.webpackChunkdocusaurus=globalThis.webpackChunkdocusaurus||[]).push([[564],{8453:(e,n,i)=>{i.d(n,{R:()=>d,x:()=>l});var s=i(6540);const r={},t=s.createContext(r);function d(e){const n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:d(e.components),s.createElement(t.Provider,{value:n},e.children)}},8650:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>d,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"data-pipelines/api-ingest-stream","title":"Ingestion of Events Using the Streaming Ingestion API","description":"API reference for sending log, metric, and event data into a pipeline for processing and routing.","source":"@site/docs/data-pipelines/api-ingest-stream.md","sourceDirName":"data-pipelines","slug":"/data-pipelines/api-ingest-stream","permalink":"/software/docs/data-pipelines/api-ingest-stream","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"id":"api-ingest-stream","slug":"api-ingest-stream","title":"Ingestion of Events Using the Streaming Ingestion API","sidebar_position":3,"sidebar_label":"Streaming Ingest API","description":"API reference for sending log, metric, and event data into a pipeline for processing and routing."},"sidebar":"tutorialSidebar","previous":{"title":"Observability Concepts","permalink":"/software/docs/data-pipelines/concept-observability-pipelines"},"next":{"title":"Route Cloud Logs","permalink":"/software/docs/data-pipelines/route-cloud-app-logs-guide"}}');var r=i(4848),t=i(8453);const d={id:"api-ingest-stream",slug:"api-ingest-stream",title:"Ingestion of Events Using the Streaming Ingestion API",sidebar_position:3,sidebar_label:"Streaming Ingest API",description:"API reference for sending log, metric, and event data into a pipeline for processing and routing."},l=void 0,a={},o=[{value:"Introduction",id:"introduction",level:2},{value:"Why Use This API?",id:"why-use-this-api",level:2},{value:"Before You Start",id:"before-you-start",level:2},{value:"Pipeline Overview (Mermaid Diagram)",id:"pipeline-overview-mermaid-diagram",level:2},{value:"ASCII Pipeline Architecture",id:"ascii-pipeline-architecture",level:2},{value:"Ingest API Endpoint",id:"ingest-api-endpoint",level:2},{value:"Request Headers",id:"request-headers",level:3},{value:"Request Body",id:"request-body",level:3},{value:"Notes",id:"notes",level:4},{value:"Response",id:"response",level:2},{value:"200 OK",id:"200-ok",level:3},{value:"400 Bad Request",id:"400-bad-request",level:3},{value:"401 Unauthorized",id:"401-unauthorized",level:3},{value:"429 Rate Limited",id:"429-rate-limited",level:3},{value:"cURL Example",id:"curl-example",level:2},{value:"Common Use Cases",id:"common-use-cases",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Next Steps",id:"next-steps",level:2}];function c(e){const n={code:"code",h2:"h2",h3:"h3",h4:"h4",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h2,{id:"introduction",children:"Introduction"}),"\n",(0,r.jsx)(n.p,{children:"Use this API to send event data into a pipeline for processing, filtering, enrichment, and routing."}),"\n",(0,r.jsxs)(n.p,{children:["This endpoint supports ",(0,r.jsx)(n.strong,{children:"high-throughput, real-time ingestion"})," and supports structured and semi-structured JSON events. It\u2019s ideal for cloud apps, microservices, IoT devices, or any system emitting telemetry."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"why-use-this-api",children:"Why Use This API?"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Ship logs and metrics directly into a pipeline"}),"\n",(0,r.jsx)(n.li,{children:"Normalize and enrich data before sending it downstream"}),"\n",(0,r.jsx)(n.li,{children:"Reduce cost by filtering or sampling early"}),"\n",(0,r.jsx)(n.li,{children:"Build flexible pipelines without vendor lock-in"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"before-you-start",children:"Before You Start"}),"\n",(0,r.jsx)(n.p,{children:"Make sure you have:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["An ",(0,r.jsx)(n.strong,{children:"API Token"})," with ingestion permissions"]}),"\n",(0,r.jsxs)(n.li,{children:["A ",(0,r.jsx)(n.strong,{children:"Stream ID"})]}),"\n",(0,r.jsx)(n.li,{children:"JSON-formatted event payloads"}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"curl"})," or Postman installed"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"pipeline-overview-mermaid-diagram",children:"Pipeline Overview (Mermaid Diagram)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mermaid",children:"flowchart LR\r\n    A [Cloud App / Microservice] --\x3e B [Streaming Ingest API]\r\n    B --\x3e C [Processing Layer<br/> \u2022 Parsing<br/> \u2022 Enrichment<br/> \u2022 Masking]\r\n    C --\x3e D [Routing Engine<br/> \u2022 Filters<br/> \u2022 Sampling<br/> \u2022 Rules]\r\n    D --\x3e E {{Destinations:<br/>S3 / SIEM / Elastic / Snowflake}}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"ascii-pipeline-architecture",children:"ASCII Pipeline Architecture"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"+--------------+       +------------------+       +----------------+       +----------------+\r\n|  Cloud App   | ---\x3e  |  Ingest API      | ---\x3e  |   Processing   | ---\x3e  |   Routing      |\r\n| (Logs/Events)|       | (POST /ingest)   |       | (Parse/Enrich) |       | (Rules Engine) |\r\n+--------------+       +------------------+       +----------------+       +----------------+\r\n                                                                               |\r\n                                                                               v\r\n                                                                    +----------------------+\r\n                                                                    |    Destinations      |\r\n                                                                    |  S3 | SIEM | DW | ES |\r\n                                                                    +----------------------+\r\n\n"})}),"\n",(0,r.jsx)(n.h2,{id:"ingest-api-endpoint",children:"Ingest API Endpoint"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"POST /v1/streams/ingest\n"})}),"\n",(0,r.jsx)(n.h3,{id:"request-headers",children:"Request Headers"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Header"}),(0,r.jsx)(n.th,{children:"Value"}),(0,r.jsx)(n.th,{children:"Required"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Authorization"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"Bearer <token>"})}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsx)(n.td,{children:"API token"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Content-Type"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"application/json"})}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsx)(n.td,{children:"JSON payload"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"X-Stream-Id"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"<your-stream-id>"})}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsx)(n.td,{children:"Target pipeline"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"request-body",children:"Request Body"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\r\n  "timestamp": "2025-02-12T14:32:15Z",\r\n  "source": "payments-app",\r\n  "event": {\r\n    "transactionId": "txn_30921",\r\n    "status": "approved",\r\n    "latency_ms": 182,\r\n    "amount": 499,\r\n    "currency": "USD"\r\n  },\r\n  "metadata": {\r\n    "env": "prod",\r\n    "team": "payments"\r\n  }\r\n}\n'})}),"\n",(0,r.jsx)(n.h4,{id:"notes",children:"Notes"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"timestamp"}),": ISO 8601 format"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event"}),": Main event data (key-value pairs)"]}),"\n",(0,r.jsxs)(n.li,{children:["Max payload size: ",(0,r.jsx)(n.strong,{children:"1 MB"})]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"response",children:"Response"}),"\n",(0,r.jsx)(n.h3,{id:"200-ok",children:"200 OK"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\r\n  "status": "accepted",\r\n  "ingested_bytes": 527,\r\n  "stream_id": "a0c3b4de-1923-4ff1-8dba-f92ad912d20f"\r\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"400-bad-request",children:"400 Bad Request"}),"\n",(0,r.jsx)(n.p,{children:"Common issues:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Invalid JSON"}),"\n",(0,r.jsx)(n.li,{children:"Incorrect timestamp format"}),"\n",(0,r.jsxs)(n.li,{children:["Missing ",(0,r.jsx)(n.code,{children:"source"})," or ",(0,r.jsx)(n.code,{children:"event"})," fields"]}),"\n",(0,r.jsx)(n.li,{children:"Payload exceeds maximum size"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\r\n  "error": "invalid_format",\r\n  "detail": "The \'timestamp\' field must be a valid ISO 8601 string."\r\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"401-unauthorized",children:"401 Unauthorized"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Token missing or expired."}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"429-rate-limited",children:"429 Rate Limited"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Reduce request rate or batch events."}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"curl-example",children:"cURL Example"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'curl -X POST "https://api.example.com/v1/streams/ingest" \\\r\n  -H "Authorization: Bearer $TOKEN" \\\r\n  -H "Content-Type: application/json" \\\r\n  -H "X-Stream-Id: $STREAM_ID" \\\r\n  -d @event.json\n'})}),"\n",(0,r.jsx)(n.h2,{id:"common-use-cases",children:"Common Use Cases"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Ingesting logs from microservices"}),"\n",(0,r.jsx)(n.li,{children:"Streaming telemetry from IoT devices"}),"\n",(0,r.jsx)(n.li,{children:"Normalizing events from distributed systems"}),"\n",(0,r.jsx)(n.li,{children:"Routing enriched events to SIEM, S3, Elastic, or Snowflake"}),"\n",(0,r.jsx)(n.li,{children:"Real-time fraud or anomaly detection pipelines"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Symptom"}),(0,r.jsx)(n.th,{children:"Likely Cause"}),(0,r.jsx)(n.th,{children:"Fix"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"No events showing in pipeline"}),(0,r.jsx)(n.td,{children:"Wrong Stream ID"}),(0,r.jsx)(n.td,{children:"Copy the correct Stream ID"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Payload rejected"}),(0,r.jsx)(n.td,{children:"Invalid JSON"}),(0,r.jsxs)(n.td,{children:["Validate using ",(0,r.jsx)(n.code,{children:"jq"})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Missing fields"}),(0,r.jsx)(n.td,{children:"Nested structure mismatch"}),(0,r.jsx)(n.td,{children:"Review parsing rules"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"High latency"}),(0,r.jsx)(n.td,{children:"Large payloads or batching"}),(0,r.jsx)(n.td,{children:"Reduce batch size"})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Add parsing, masking, or enrichment rules"}),"\n",(0,r.jsx)(n.li,{children:"Route data to multiple destinations"}),"\n",(0,r.jsx)(n.li,{children:"Reduce cost with sampling or filtering"}),"\n",(0,r.jsx)(n.li,{children:"Build pipeline metrics and dashboards"}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}}}]);